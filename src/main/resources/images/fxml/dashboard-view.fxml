<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ListView?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import java.lang.String?>

<ScrollPane xmlns="http://javafx.com/javafx/13"
    xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="com.barangay.presentation.controllers.DashboardController"
    fitToWidth="true"
    hbarPolicy="NEVER" vbarPolicy="AS_NEEDED"
    styleClass="dashboard-root">
    <content>
        <VBox spacing="24">
            <padding>
                <Insets top="24" right="24" bottom="24" left="24" />
            </padding>
            <children>
                <VBox fx:id="adminDashboardContainer" spacing="24">
                    <children>
                        <Label text="Executive Dashboard" styleClass="section-title" />
                        <GridPane hgap="16" vgap="16">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="33" />
                                <ColumnConstraints percentWidth="33" />
                                <ColumnConstraints percentWidth="33" />
                            </columnConstraints>
                            <rowConstraints>
                                <RowConstraints minHeight="120" />
                                <RowConstraints minHeight="120" />
                                <RowConstraints minHeight="120" />
                            </rowConstraints>
                            <children>
                                <VBox GridPane.columnIndex="0" GridPane.rowIndex="0">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Total Residents" styleClass="card-caption" />
                                        <Label fx:id="totalResidentsLabel" text="0"
                                            styleClass="card-value" />
                                        <Label text="Registered in the barangay"
                                            styleClass="card-note" />
                                    </children>
                                </VBox>
                                <VBox GridPane.columnIndex="1" GridPane.rowIndex="0">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Active Residents" styleClass="card-caption" />
                                        <Label fx:id="activeResidentsLabel" text="0"
                                            styleClass="card-value" />
                                        <Label text="Eligible for services" styleClass="card-note" />
                                    </children>
                                </VBox>
                                <VBox GridPane.columnIndex="2" GridPane.rowIndex="0">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Registered Voters" styleClass="card-caption" />
                                        <Label fx:id="registeredVotersLabel" text="0"
                                            styleClass="card-value" />
                                        <Label text="Verified voters" styleClass="card-note" />
                                    </children>
                                </VBox>

                                <VBox GridPane.columnIndex="0" GridPane.rowIndex="1">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Male Residents" styleClass="card-caption" />
                                        <Label fx:id="maleResidentsLabel" text="0"
                                            styleClass="card-value" />
                                        <Label text="Demographic split" styleClass="card-note" />
                                    </children>
                                </VBox>
                                <VBox GridPane.columnIndex="1" GridPane.rowIndex="1">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Female Residents" styleClass="card-caption" />
                                        <Label fx:id="femaleResidentsLabel" text="0"
                                            styleClass="card-value" />
                                        <Label text="Demographic split" styleClass="card-note" />
                                    </children>
                                </VBox>
                                <VBox GridPane.columnIndex="2" GridPane.rowIndex="1">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Total Documents" styleClass="card-caption" />
                                        <Label fx:id="totalDocumentsLabel" text="0"
                                            styleClass="card-value" />
                                        <Label text="All issued documents" styleClass="card-note" />
                                    </children>
                                </VBox>

                                <VBox GridPane.columnIndex="0" GridPane.rowIndex="2">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Issued Today" styleClass="card-caption" />
                                        <Label fx:id="documentsTodayLabel" text="0"
                                            styleClass="card-value" />
                                        <Label text="Document issuance today" styleClass="card-note" />
                                    </children>
                                </VBox>
                                <VBox GridPane.columnIndex="1" GridPane.rowIndex="2">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="This Month" styleClass="card-caption" />
                                        <Label fx:id="documentsMonthLabel" text="0"
                                            styleClass="card-value" />
                                        <Label text="Document issuance this month"
                                            styleClass="card-note" />
                                    </children>
                                </VBox>
                                <VBox GridPane.columnIndex="2" GridPane.rowIndex="2">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Users Summary" styleClass="card-caption" />
                                        <Label fx:id="usersSummaryLabel" text="--" wrapText="true"
                                            styleClass="card-note" />
                                    </children>
                                </VBox>
                            </children>
                        </GridPane>

                        <GridPane hgap="18" vgap="18">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="50" />
                                <ColumnConstraints percentWidth="25" />
                                <ColumnConstraints percentWidth="25" />
                            </columnConstraints>
                            <children>
                                <VBox GridPane.columnIndex="0">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                        <String fx:value="wide" />
                                    </styleClass>
                                    <children>
                                        <Label text="Document Breakdown" styleClass="card-caption" />
                                        <Label text="Barangay IDs" styleClass="card-note" />
                                        <Label fx:id="barangayIdCountLabel" text="0">
                                            <styleClass>
                                                <String fx:value="card-value" />
                                                <String fx:value="small" />
                                            </styleClass>
                                        </Label>
                                        <Label text="Barangay Clearances" styleClass="card-note" />
                                        <Label fx:id="clearanceCountLabel" text="0">
                                            <styleClass>
                                                <String fx:value="card-value" />
                                                <String fx:value="small" />
                                            </styleClass>
                                        </Label>
                                        <Label text="Residency Certificates" styleClass="card-note" />
                                        <Label fx:id="residencyCountLabel" text="0">
                                            <styleClass>
                                                <String fx:value="card-value" />
                                                <String fx:value="small" />
                                            </styleClass>
                                        </Label>
                                    </children>
                                </VBox>
                                <VBox GridPane.columnIndex="1">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Applications Pending" styleClass="card-caption" />
                                        <Label fx:id="pendingApplicationsLabel" text="0"
                                            styleClass="card-value" />
                                        <Label text="Awaiting review" styleClass="card-note" />
                                    </children>
                                </VBox>
                                <VBox GridPane.columnIndex="2">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Scheduled / Verified" styleClass="card-caption" />
                                        <Label fx:id="scheduledApplicationsLabel" text="0">
                                            <styleClass>
                                                <String fx:value="card-value" />
                                                <String fx:value="small" />
                                            </styleClass>
                                        </Label>
                                        <Label text="Scheduled" styleClass="card-note" />
                                        <Label fx:id="verifiedApplicationsLabel" text="0">
                                            <styleClass>
                                                <String fx:value="card-value" />
                                                <String fx:value="small" />
                                            </styleClass>
                                        </Label>
                                        <Label text="Verified" styleClass="card-note" />
                                    </children>
                                </VBox>
                            </children>
                        </GridPane>

                        <VBox>
                            <styleClass>
                                <String fx:value="stat-card" />
                                <String fx:value="wide" />
                            </styleClass>
                            <children>
                                <Label text="Document Requests" styleClass="card-caption" />
                                <Label text="Pending" styleClass="card-note" />
                                <Label fx:id="pendingRequestsLabel" text="0">
                                    <styleClass>
                                        <String fx:value="card-value" />
                                        <String fx:value="small" />
                                    </styleClass>
                                </Label>
                                <Label text="Under Review" styleClass="card-note" />
                                <Label fx:id="underReviewRequestsLabel" text="0">
                                    <styleClass>
                                        <String fx:value="card-value" />
                                        <String fx:value="small" />
                                    </styleClass>
                                </Label>
                                <Label text="Approved" styleClass="card-note" />
                                <Label fx:id="approvedRequestsLabel" text="0">
                                    <styleClass>
                                        <String fx:value="card-value" />
                                        <String fx:value="small" />
                                    </styleClass>
                                </Label>
                            </children>
                        </VBox>

                        <VBox spacing="12">
                            <children>
                                <Label text="Operational Insights" styleClass="section-title" />
                                <ListView fx:id="insightsListView" prefHeight="180" />
                            </children>
                        </VBox>
                    </children>
                </VBox>

                <VBox fx:id="residentDashboardContainer" spacing="18" visible="false"
                    managed="false">
                    <children>
                        <Label text="My Dashboard" styleClass="section-title" />
                        <GridPane hgap="16" vgap="16">
                            <columnConstraints>
                                <ColumnConstraints percentWidth="50" />
                                <ColumnConstraints percentWidth="50" />
                            </columnConstraints>
                            <children>
                                <VBox GridPane.columnIndex="0">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                        <String fx:value="wide" />
                                    </styleClass>
                                    <children>
                                        <Label text="Resident" styleClass="card-caption" />
                                        <Label fx:id="residentNameLabel" text="--"
                                            styleClass="card-value" />
                                        <Label fx:id="residentIdLabel" text="--"
                                            styleClass="card-note" />
                                        <Label fx:id="residentContactLabel" text="Contact: --"
                                            styleClass="card-note" />
                                        <Label fx:id="residentAddressLabel" text="Address: --"
                                            wrapText="true" styleClass="card-note" />
                                    </children>
                                </VBox>
                                <VBox GridPane.columnIndex="1">
                                    <styleClass>
                                        <String fx:value="stat-card" />
                                    </styleClass>
                                    <children>
                                        <Label text="Status" styleClass="card-caption" />
                                        <Label fx:id="residentStatusLabel" text="--"
                                            styleClass="card-value" />
                                        <Label fx:id="residentVoterStatusLabel"
                                            text="Voter status --" styleClass="card-note" />
                                        <Label fx:id="residentNoticeLabel" text="" wrapText="true"
                                            styleClass="card-note" />
                                    </children>
                                </VBox>
                            </children>
                        </GridPane>

                        <VBox spacing="8">
                            <children>
                                <Label text="My Documents" styleClass="section-title" />
                                <ListView fx:id="residentDocumentsListView" prefHeight="200" />
                            </children>
                        </VBox>

                        <VBox spacing="8">
                            <children>
                                <Label text="My Voter Applications" styleClass="section-title" />
                                <ListView fx:id="residentApplicationsListView" prefHeight="200" />
                            </children>
                        </VBox>

                        <VBox spacing="8">
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="12">
                                    <Label text="My Document Requests" styleClass="section-title" />
                                    <Button text="Request Document"
                                        onAction="#handleRequestDocument" />
                                </HBox>
                                <ListView fx:id="residentRequestsListView" prefHeight="200" />
                            </children>
                        </VBox>
                        <Label fx:id="residentMissingLinkLabel"
                            text="No resident profile is linked to your account yet. Please contact the barangay office."
                            wrapText="true" visible="false" managed="false" styleClass="card-note" />
                    </children>
                </VBox>
            </children>
        </VBox>
    </content>
</ScrollPane>