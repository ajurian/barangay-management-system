<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import java.lang.String?>

<ScrollPane xmlns="http://javafx.com/javafx/13"
    xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="com.barangay.presentation.controllers.ProfileController"
    fitToWidth="true"
    hbarPolicy="NEVER"
    vbarPolicy="AS_NEEDED">
    <content>
        <VBox spacing="24">
            <padding>
                <Insets top="20" right="24" bottom="24" left="24" />
            </padding>
            <children>
                <VBox spacing="8">
                    <children>
                        <Label text="Profile">
                            <styleClass>
                                <String fx:value="section-title" />
                            </styleClass>
                        </Label>
                        <Label fx:id="profileMessageLabel" text="" />
                    </children>
                </VBox>

                <GridPane hgap="12" vgap="12">
                    <columnConstraints>
                        <ColumnConstraints halignment="RIGHT" minWidth="140" />
                        <ColumnConstraints hgrow="ALWAYS" />
                    </columnConstraints>
                    <children>
                        <Label GridPane.rowIndex="0" text="Username" />
                        <Label GridPane.rowIndex="0" GridPane.columnIndex="1" fx:id="usernameLabel"
                            text="" />

                        <Label GridPane.rowIndex="1" text="Role" />
                        <Label GridPane.rowIndex="1" GridPane.columnIndex="1" fx:id="roleLabel"
                            text="" />

                        <Label GridPane.rowIndex="2" text="Linked Resident ID (optional)"
                            fx:id="linkedResidentLabel" visible="false" managed="false"
                            styleClass="optional-field-label" />
                        <TextField GridPane.rowIndex="2" GridPane.columnIndex="1"
                            fx:id="residentIdField" promptText="BR-YYYY-XXXXXXXXXX" visible="false"
                            managed="false" />
                    </children>
                </GridPane>

                <HBox alignment="CENTER_RIGHT" spacing="12">
                    <children>
                        <Region HBox.hgrow="ALWAYS" />
                        <Button fx:id="saveProfileButton" text="Save Profile"
                            onAction="#handleSaveProfile" visible="false" managed="false" />
                    </children>
                </HBox>

                <VBox spacing="12" fx:id="residentInfoSection" managed="false" visible="false">
                    <children>
                        <Label text="Resident Information">
                            <styleClass>
                                <String fx:value="section-title" />
                            </styleClass>
                        </Label>
                        <Label fx:id="residentInfoMessageLabel" wrapText="true" />
                        <GridPane hgap="12" vgap="8">
                            <columnConstraints>
                                <ColumnConstraints halignment="RIGHT" minWidth="140" />
                                <ColumnConstraints hgrow="ALWAYS" />
                            </columnConstraints>
                            <children>
                                <Label GridPane.rowIndex="0" text="Resident ID" />
                                <Label GridPane.rowIndex="0" GridPane.columnIndex="1"
                                    fx:id="residentIdValueLabel" text="--" />

                                <Label GridPane.rowIndex="1" text="Full Name" />
                                <Label GridPane.rowIndex="1" GridPane.columnIndex="1"
                                    fx:id="residentNameValueLabel" text="--" />

                                <Label GridPane.rowIndex="2" text="Birth Date" />
                                <Label GridPane.rowIndex="2" GridPane.columnIndex="1"
                                    fx:id="residentBirthDateValueLabel" text="--" />

                                <Label GridPane.rowIndex="3" text="Gender" />
                                <Label GridPane.rowIndex="3" GridPane.columnIndex="1"
                                    fx:id="residentGenderValueLabel" text="--" />

                                <Label GridPane.rowIndex="4" text="Contact" />
                                <Label GridPane.rowIndex="4" GridPane.columnIndex="1"
                                    fx:id="residentContactValueLabel" text="--" />

                                <Label GridPane.rowIndex="5" text="Address" />
                                <Label GridPane.rowIndex="5" GridPane.columnIndex="1"
                                    fx:id="residentAddressValueLabel" wrapText="true" text="--" />

                                <Label GridPane.rowIndex="6" text="Status" />
                                <Label GridPane.rowIndex="6" GridPane.columnIndex="1"
                                    fx:id="residentStatusValueLabel" text="--" />

                                <Label GridPane.rowIndex="7" text="Voter Status" />
                                <Label GridPane.rowIndex="7" GridPane.columnIndex="1"
                                    fx:id="residentVoterStatusValueLabel" text="--" />
                            </children>
                        </GridPane>
                    </children>
                </VBox>

                <VBox spacing="12">
                    <children>
                        <Label text="Change Password">
                            <styleClass>
                                <String fx:value="section-title" />
                            </styleClass>
                        </Label>
                        <Label text="All password fields are required." styleClass="hint" />
                        <Label fx:id="passwordHintLabel" wrapText="true" />
                        <GridPane hgap="12" vgap="12">
                            <columnConstraints>
                                <ColumnConstraints halignment="RIGHT" minWidth="140" />
                                <ColumnConstraints hgrow="ALWAYS" />
                            </columnConstraints>
                            <children>
                                <Label GridPane.rowIndex="0" text="Current Password"
                                    styleClass="required-field-label" contentDisplay="RIGHT"
                                    graphicTextGap="4">
                                    <graphic>
                                        <Label text="*" styleClass="required-asterisk" />
                                    </graphic>
                                </Label>
                                <PasswordField GridPane.rowIndex="0" GridPane.columnIndex="1"
                                    fx:id="currentPasswordField" promptText="Enter current password" />

                                <Label GridPane.rowIndex="1" text="New Password"
                                    styleClass="required-field-label" contentDisplay="RIGHT"
                                    graphicTextGap="4">
                                    <graphic>
                                        <Label text="*" styleClass="required-asterisk" />
                                    </graphic>
                                </Label>
                                <PasswordField GridPane.rowIndex="1" GridPane.columnIndex="1"
                                    fx:id="newPasswordField" promptText="Enter new password" />

                                <Label GridPane.rowIndex="2" text="Confirm Password"
                                    styleClass="required-field-label" contentDisplay="RIGHT"
                                    graphicTextGap="4">
                                    <graphic>
                                        <Label text="*" styleClass="required-asterisk" />
                                    </graphic>
                                </Label>
                                <PasswordField GridPane.rowIndex="2" GridPane.columnIndex="1"
                                    fx:id="confirmPasswordField" promptText="Confirm new password" />
                            </children>
                        </GridPane>
                        <HBox alignment="CENTER_RIGHT" spacing="12">
                            <children>
                                <Region HBox.hgrow="ALWAYS" />
                                <Button text="Update Password" onAction="#handleChangePassword" />
                            </children>
                        </HBox>
                    </children>
                </VBox>
            </children>
        </VBox>
    </content>
</ScrollPane>